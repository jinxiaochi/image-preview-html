{"version":3,"file":"index.es.js","sources":["../src/index.ts"],"sourcesContent":["import type { ImagePreviewConfig } from '../type';\r\nimport './style.css'\r\n\r\n// 元素查询方法的绑定\r\nconst $ = document.querySelector.bind(document), $$ = document.querySelectorAll.bind(document);\r\n// 默认配置对象\r\nconst defultConfig: ImagePreviewConfig = {\r\n    selector: '[preview]', // 图片预览节点选择器\r\n    appendSelector: 'body', // 弹出层的插入dom节点的选择器\r\n    clickDialogClose: true, // 点击蒙版是否关闭弹出框\r\n\r\n    class: { // 设置的各个html表的class\r\n        class_image_wrapper: 'image-wrapper',\r\n        class_image_content: \"image-preview\",\r\n        class_dialog_wrapper: 'dialog-wrapper',\r\n        class_action_wrapper: 'action-wrapper',\r\n        class_operate_icon: 'operate-icon',\r\n        class_close_icon: 'close-icon',\r\n    },\r\n    actionConfig: {\r\n        zoomStep: 0.2,  // 放大、缩小倍数\r\n        minScale: 0.2,  // 最小 缩小倍数\r\n        maxScale: 2,    // 最大 缩小倍数\r\n        rotateStepDeg: 90, // 每次旋转的旋转角度\r\n        rotateBack: false, // 旋转360度时是否重置为0度\r\n    },\r\n    actionVisibleConfig: { // 操作按钮的显示和隐藏\r\n        zoomIn: true,\r\n        zoomOut: true,\r\n        rotateLeft: true,\r\n        rotateRight: true,\r\n    },\r\n    icons: { // 操作按钮的 图片路径(base64格式)\r\n        zoomIn: 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNzE5NDc2MzU4MjIxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjYxMTkiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiPjxwYXRoIGQ9Ik02NjAuODc3ODI0IDczMy4xODRhNDA5LjYgNDA5LjYgMCAxIDEgNzIuMTkyLTcyLjE5MmwyNzMuOTIgMjcyLjg5Ni03Mi43MDQgNzIuNzA0LTI3Mi44OTYtMjczLjQwOHpNNDA5Ljk5NzgyNCA3MTYuOEEzMDcuMiAzMDcuMiAwIDEgMCA0MDkuOTk3ODI0IDEwMi40YTMwNy4yIDMwNy4yIDAgMCAwIDAgNjE0LjR6TTM1OC43OTc4MjQgMzU4LjRWMjU2aDEwMi40djEwMi40aDEwMi40djEwMi40SDQ2MS4xOTc4MjR2MTAyLjRIMzU4Ljc5NzgyNFY0NjAuOEgyNTYuMzk3ODI0VjM1OC40aDEwMi40eiIgcC1pZD0iNjEyMCIgZmlsbD0iI2ZmZmZmZiI+PC9wYXRoPjwvc3ZnPg==',\r\n        zoomOut: 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNzE5NDc2MzcwMzUyIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjcxNjMiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiPjxwYXRoIGQ9Ik02NjAuODc3ODI0IDczMy4xODRhNDA5LjYgNDA5LjYgMCAxIDEgNzIuMTkyLTcyLjE5MmwyNzMuOTIgMjcyLjg5Ni03Mi43MDQgNzIuNzA0LTI3Mi44OTYtMjczLjQwOHpNNDA5Ljk5NzgyNCA3MTYuOEEzMDcuMiAzMDcuMiAwIDEgMCA0MDkuOTk3ODI0IDEwMi40YTMwNy4yIDMwNy4yIDAgMCAwIDAgNjE0LjR6TTI1Ni4zOTc4MjQgMzU4LjRoMzA3LjJ2MTAyLjRIMjU2LjM5NzgyNFYzNTguNHoiIHAtaWQ9IjcxNjQiIGZpbGw9IiNmZmZmZmYiPjwvcGF0aD48L3N2Zz4=',\r\n        rotateLeft: 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNzE5NDc2NDc4MTA0IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9Ijk0NTIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiPjxwYXRoIGQ9Ik05NTAuODIwNTcxIDUxMmMwIDI0MS43MDA1NzEtMTk3LjE1NjU3MSA0MzguODU3MTQzLTQzOC44NTcxNDIgNDM4Ljg1NzE0M2E0MzcuODMzMTQzIDQzNy44MzMxNDMgMCAwIDEtMzM3LjcwMDU3Mi0xNTguMjgxMTQzIDE5LjAxNzE0MyAxOS4wMTcxNDMgMCAwIDEgMS4xMzM3MTQtMjQuNTc2bDc4LjI5OTQyOS03OC44NDhhMjEuOTA2Mjg2IDIxLjkwNjI4NiAwIDAgMSAxNC4yOTk0MjktNS4xNTY1NzEgMTguNjUxNDI5IDE4LjY1MTQyOSAwIDAgMSAxMy4xMjkxNDIgNi44Mzg4NTdBMjg5LjI4IDI4OS4yOCAwIDAgMCA1MTEuOTYzNDI5IDgwNC41MzQ4NTdjMTYxLjEzMzcxNCAwIDI5Mi41NzE0MjktMTMxLjQzNzcxNCAyOTIuNTcxNDI4LTI5Mi41NzE0MjhzLTEzMS40Mzc3MTQtMjkyLjU3MTQyOS0yOTIuNTcxNDI4LTI5Mi41NzE0MjlBMjkwLjgxNiAyOTAuODE2IDAgMCAwIDMxMy4xMjQ1NzEgMjk3LjY5MTQyOWw3OC4yOTk0MjkgNzguODQ4YTM1LjI1NDg1NyAzNS4yNTQ4NTcgMCAwIDEgOC4wMDkxNDMgMzkuNDI0IDM2LjY0NDU3MSAzNi42NDQ1NzEgMCAwIDEtMzMuNzE4ODU3IDIyLjg1NzE0MmgtMjU2Yy0yMC4wMDQ1NzEgMC0zNi41NzE0MjktMTYuNTY2ODU3LTM2LjU3MTQyOS0zNi41NzE0Mjh2LTI1NmMwLTE0Ljg0OCA5LjE0Mjg1Ny0yOC4wMTM3MTQgMjIuODU3MTQzLTMzLjcxODg1N2EzNS4yNTQ4NTcgMzUuMjU0ODU3IDAgMCAxIDM5LjQyNCA4LjAwOTE0M2w3NC4yNzY1NzEgNzMuNzI4YzgwLjU2Njg1Ny03NS45OTU0MjkgMTg5LjY5Ni0xMjEuMTYxMTQzIDMwMi4yOTk0MjktMTIxLjE2MTE0MyAyNDEuNzAwNTcxIDAgNDM4Ljg1NzE0MyAxOTcuMTU2NTcxIDQzOC44NTcxNDMgNDM4Ljg1NzE0M3oiIGZpbGw9IiNmZmZmZmYiIHAtaWQ9Ijk0NTMiPjwvcGF0aD48L3N2Zz4=',\r\n        rotateRight: 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNzE5NDc2NDg5MjM3IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjEwNDg2IiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4Ij48cGF0aCBkPSJNOTI3IDQ0OGgxN2MyNi42IDAgNDgtMjEuNCA0OC00OFYxNDRjMC0xOS40LTExLjYtMzctMjkuNi00NC40UzkyMy44IDk2LjIgOTEwIDExMGwtODMuMiA4My4yYy0xNzUuMi0xNzMtNDU3LjQtMTcyLjQtNjMxLjYgMi0xNzUgMTc1LTE3NSA0NTguNiAwIDYzMy42czQ1OC42IDE3NSA2MzMuNiAwYzI1LTI1IDI1LTY1LjYgMC05MC42cy02NS42LTI1LTkwLjYgMGMtMTI1IDEyNS0zMjcuNiAxMjUtNDUyLjYgMHMtMTI1LTMyNy42IDAtNDUyLjZjMTI0LjQtMTI0LjQgMzI1LjQtMTI1IDQ1MC42LTJMNjU0IDM2NmMtMTMuOCAxMy44LTE3LjggMzQuNC0xMC40IDUyLjRTNjY4LjYgNDQ4IDY4OCA0NDhoMjM5eiIgcC1pZD0iMTA0ODciIGZpbGw9IiNmZmZmZmYiPjwvcGF0aD48L3N2Zz4=',\r\n        close: 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNzE5NDc2NTA2NTA4IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjUgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjExNTI3IiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ4LjA0Njg3NSIgaGVpZ2h0PSI0OCI+PHBhdGggZD0iTTUxMy4zNDQgMGE1MTIgNTEyIDAgMSAwIDAgMTAyNCA1MTIgNTEyIDAgMCAwIDAtMTAyNHogbTIyNi4wNDggNjc0LjYyNGwtNTQuNTI4IDU2Ljg5Ni0xNzEuNTItMTY0LjkyOC0xNzEuMzkyIDE2NC45MjgtNTQuNTkyLTU2Ljg5Nkw0NTYuNTc2IDUxMiAyODcuMzYgMzQ5LjMxMmw1NC41OTItNTYuNzY4IDE3MS4zOTIgMTY0LjggMTcxLjUyLTE2NC44IDU0LjUyOCA1Ni43NjhMNTcwLjE3NiA1MTJsMTY5LjIxNiAxNjIuNjI0eiIgZmlsbD0iI2U2ZTZlNiIgcC1pZD0iMTE1MjgiPjwvcGF0aD48L3N2Zz4=',\r\n    }\r\n}\r\n\r\nconst config: ImagePreviewConfig = {};\r\n// 设置用户配置\r\nfunction initConfig(userConf = {}) {\r\n    Object.assign(config, defultConfig, userConf);\r\n    bindEvent();\r\n}\r\n\r\nfunction previewImage(imageUrl:string){\r\n    return DialogOperator.openDialog(imageUrl);\r\n}\r\n\r\n// 事件绑定-事件委托\r\nfunction bindEvent() {\r\n    $('body').addEventListener('click', function (event) {\r\n        const target = event.target;\r\n        // 点击预览图片\r\n        if (target.matches(config.selector)) {\r\n            return previewImage(target.src);\r\n        }\r\n        // 点击遮罩层-关闭dialog\r\n        if (config.clickDialogClose && (target.classList.contains(config.class?.class_dialog_wrapper) || target.classList.contains(config.class?.class_image_wrapper))) {\r\n            return target.classList.contains(config.class?.class_dialog_wrapper) ? DialogOperator.closeDialog(target) : DialogOperator.closeDialog(target.parentElement);\r\n        }\r\n\r\n        // 点击操作按钮\r\n        if (target.classList.contains(config?.class?.class_operate_icon)) {\r\n            const imageNode = target.parentElement.parentElement.querySelector(`img.${config?.class?.class_image_content}`);\r\n            const typeName = target.getAttribute('name');\r\n            if (typeName == 'zoomIn') {\r\n                return ImageOperator.ZoomIn(imageNode);\r\n            }\r\n            if (typeName == 'zoomOut') {\r\n                return ImageOperator.ZoomOut(imageNode);\r\n            }\r\n            if (typeName == 'rotateLeft') {\r\n                return ImageOperator.rotateLeft(imageNode);\r\n            }\r\n            if (typeName == 'rotateRight') {\r\n                return ImageOperator.rotateRight(imageNode);\r\n            }\r\n            // 点击关闭按钮\r\n            if (typeName == 'close') {\r\n                return DialogOperator.closeDialog(imageNode.parentElement.parentElement);\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\n// 弹出框操作\r\nconst DialogOperator = {\r\n    openDialog(imagePath:string) {\r\n        // 已经创建了则直接替换\r\n        if ($(`${config.appendSelector}>.${config?.class?.class_dialog_wrapper}`)) {\r\n            const dialogWrapper = $(`${config.appendSelector}>.${config?.class?.class_dialog_wrapper}`);\r\n            const imageElement = dialogWrapper.querySelector(`img.${config?.class?.class_image_content}`);\r\n            imageElement.src = imagePath;\r\n            dialogWrapper.style.display = 'block';\r\n            return;\r\n        }\r\n\r\n        // 没有则新建\r\n        const dialogWrapper = document.createElement('div');\r\n        dialogWrapper.classList.add(config?.class?.class_dialog_wrapper || '');\r\n        dialogWrapper.innerHTML = `\r\n            <div class='${config?.class?.class_image_wrapper}'>\r\n                <img src='${imagePath}' draggable=\"false\" alt=\"preview\" class=\"${config?.class?.class_image_content}\"/>\r\n                <div class='${config?.class?.class_operate_icon} ${config?.class?.class_close_icon}' style='background-image: url(${config?.icons?.close})' name='close'></div>\r\n                <div class='${config?.class?.class_action_wrapper}'>\r\n                    ${Object.entries(config?.actionVisibleConfig || {}).filter(([key, value]) => value).map(([key, value]) => `\r\n                            <div class='${config?.class?.class_operate_icon}' name='${key}' style='background-image: url(${config.icons![key] || ''})'></div>\r\n                        `).join('')\r\n            }\r\n                </div>\r\n            <div>\r\n        `\r\n        $(config.appendSelector).appendChild(dialogWrapper);\r\n    },\r\n\r\n    closeDialog(dialogDom:HTMLElement) {\r\n        const imageElement = dialogDom.querySelector(`img.${config?.class?.class_image_content}`) as HTMLElement;\r\n        imageElement.style.transform = ''; //变换样式重置\r\n        dialogDom.style.display = 'none';\r\n    },\r\n\r\n    desotryDialog(dialogDom:HTMLElement) {\r\n        this.closeDialog(dialogDom);\r\n        dialogDom.remove();\r\n    }\r\n}\r\n\r\n\r\n// CSS 的transform字符串和对象的转换， 如 scale(1.2) rotate(90deg) 变为 { scale: '1.2', rotate: '90deg' };\r\nconst cssTransformUtil = {\r\n    regExp: /(\\w+)\\(\\s*(-?\\w*\\.?\\w*)\\s*\\)/,\r\n    getNumberOfString(str: string): number {\r\n        let num = 0;\r\n        if (!str) {\r\n            return num;\r\n        }\r\n        const matches = String(str).match(/-?\\d*\\.?\\d*/);\r\n        if (matches) {\r\n            num = Number(matches[0]);\r\n        }\r\n        return num;\r\n    },\r\n    pareStrToObj(str: string): any {\r\n        const obj = {};\r\n        if (str) {\r\n            const arr = String(str).split(' ');\r\n            arr.forEach(strItem => {\r\n                const matches = strItem.match(this.regExp);\r\n                if (matches) {\r\n                    const [, key, value] = matches;\r\n                    obj[key.trim()] = value.trim();\r\n                }\r\n            })\r\n        }\r\n        return obj;\r\n    },\r\n    stringfyObj(obj:any) {\r\n        return Object.entries(obj).map(([key, val]) => `${key}(${val})`).join(' ');\r\n    },\r\n}\r\n\r\n// 图片操作对象\r\nconst ImageOperator = {\r\n    ZoomIn(imageNode:HTMLElement) {\r\n        const transformObj = cssTransformUtil.pareStrToObj(imageNode.style.transform);\r\n        let preScale = cssTransformUtil.getNumberOfString(transformObj.scale) || 1;\r\n        let scaleNum = preScale + config?.actionConfig?.zoomStep!;\r\n        if (preScale < config?.actionConfig?.maxScale!) {\r\n            transformObj.scale = scaleNum;\r\n            imageNode.style.transform = cssTransformUtil.stringfyObj(transformObj);\r\n        }\r\n    },\r\n\r\n    ZoomOut(imageNode:HTMLElement) {\r\n        const transformObj = cssTransformUtil.pareStrToObj(imageNode.style.transform);\r\n        let preScale = cssTransformUtil.getNumberOfString(transformObj.scale) || 1;\r\n        let scaleNum = preScale - config.actionConfig!.zoomStep!;\r\n        if (preScale > config.actionConfig!.minScale!) {\r\n            transformObj.scale = scaleNum;\r\n            imageNode.style.transform = cssTransformUtil.stringfyObj(transformObj);\r\n        }\r\n    },\r\n\r\n    rotateLeft(imageNode:HTMLElement) {\r\n        const transformObj = cssTransformUtil.pareStrToObj(imageNode.style.transform);\r\n        let preRotate = cssTransformUtil.getNumberOfString(transformObj.rotate) || 0;\r\n        let rotateDeg = config.actionConfig!.rotateBack ?\r\n            (preRotate - config.actionConfig!.rotateStepDeg!) % 360 : (preRotate - config.actionConfig!.rotateStepDeg!);\r\n        transformObj.rotate = rotateDeg + 'deg';\r\n        imageNode.style.transform = cssTransformUtil.stringfyObj(transformObj);\r\n    },\r\n\r\n    rotateRight(imageNode:HTMLElement) {\r\n        const transformObj = cssTransformUtil.pareStrToObj(imageNode.style.transform);\r\n        let preRotate = cssTransformUtil.getNumberOfString(transformObj.rotate) || 0;\r\n        let rotateDeg = config.actionConfig!.rotateBack! ?\r\n            (preRotate + config.actionConfig!.rotateStepDeg!) % 360 : (preRotate + config.actionConfig!.rotateStepDeg!);\r\n        transformObj.rotate = rotateDeg + 'deg';\r\n        imageNode.style.transform = cssTransformUtil.stringfyObj(transformObj);\r\n    },\r\n}\r\n\r\n\r\n\r\nexport default {\r\n    initConfig, \r\n    previewImage,\r\n}\r\n"],"names":["$","defultConfig","config","initConfig","userConf","bindEvent","previewImage","imageUrl","DialogOperator","event","_a","_b","_c","_d","_e","target","imageNode","typeName","ImageOperator","imagePath","_f","_g","_h","_i","_j","dialogWrapper","imageElement","key","value","dialogDom","cssTransformUtil","str","num","matches","obj","strItem","val","transformObj","preScale","scaleNum","preRotate","rotateDeg","index"],"mappings":"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"}